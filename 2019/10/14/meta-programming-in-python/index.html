<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Saurabh Kukade ">
<meta name="description" content="“Perfection is achieved not when there is nothing more to add, but rather when there is nothing more to take away.” – Antoine de Saint-Exupery
 Recently I encountered with very fascinating concept which is &amp;ldquo;Meta-programming in Python&amp;rdquo;. I would like to share my findings about this topic in this article. I hope it may help you to wrap your head around this because they say it is tough nut to crack." />
<meta name="keywords" content=", python" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://saurabhkukade.github.io/2019/10/14/meta-programming-in-python/" />


    <title>
        
            Meta-programming In Python :: SAURABH KUKADE  — Hello Friend NG Theme
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://saurabhkukade.github.io/main.min.84ed5579024525d4b50458514d1a43e40dd5272df45c7cd6da85b225af457154.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://saurabhkukade.github.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://saurabhkukade.github.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://saurabhkukade.github.io/favicon-16x16.png">
    <link rel="manifest" href="https://saurabhkukade.github.io/site.webmanifest">
    <link rel="mask-icon" href="https://saurabhkukade.github.io/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://saurabhkukade.github.io/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Meta-programming In Python">
<meta itemprop="description" content="“Perfection is achieved not when there is nothing more to add, but rather when there is nothing more to take away.” – Antoine de Saint-Exupery
 Recently I encountered with very fascinating concept which is &ldquo;Meta-programming in Python&rdquo;. I would like to share my findings about this topic in this article. I hope it may help you to wrap your head around this because they say it is tough nut to crack.">
<meta itemprop="datePublished" content="2019-10-14T16:55:25&#43;05:30" />
<meta itemprop="dateModified" content="2019-10-14T16:55:25&#43;05:30" />
<meta itemprop="wordCount" content="936">
<meta itemprop="image" content="https://saurabhkukade.github.io"/>



<meta itemprop="keywords" content="python," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://saurabhkukade.github.io"/>

<meta name="twitter:title" content="Meta-programming In Python"/>
<meta name="twitter:description" content="“Perfection is achieved not when there is nothing more to add, but rather when there is nothing more to take away.” – Antoine de Saint-Exupery
 Recently I encountered with very fascinating concept which is &ldquo;Meta-programming in Python&rdquo;. I would like to share my findings about this topic in this article. I hope it may help you to wrap your head around this because they say it is tough nut to crack."/>





    <meta property="article:published_time" content="2019-10-14 16:55:25 &#43;0530 IST" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://saurabhkukade.github.io/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://saurabhkukade.github.io/about/">About Me</a></li><li><a href="https://saurabhkukade.github.io/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>5 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://saurabhkukade.github.io/2019/10/14/meta-programming-in-python/">Meta-programming In Python</a>
            </h1>

            

            <div class="post-content">
                <blockquote>
<p>“Perfection is achieved not when there is nothing more to add, but rather when there is nothing more to take away.” – Antoine de Saint-Exupery</p>
</blockquote>
<p>Recently I encountered with very fascinating concept which is &ldquo;Meta-programming in Python&rdquo;. I would like to share my
findings about this topic in this article. I hope it may help you to wrap your head around this because they say
it is tough nut to crack.</p>
<h3 id="what-is-meta-programming">What is Meta-programming?</h3>
<p>So in one line:</p>
<blockquote>
<p>&ldquo;Meta-programming is a act of writing code which manipulates code.&rdquo;</p>
</blockquote>
<p>Wait what? yes you read it right. Code which manipulate code. Isn&rsquo;t it sound fascinating and powerful? Well actually it is.</p>
<p>In the context of Python, meta-programming can be stated as:</p>
<blockquote>
<p>&ldquo;Meta-programming is an act of building functions and classes who can manipulate code by modifying, wrapping existing code or generating code.&rdquo;</p>
</blockquote>
<p>Meta-programming in python can be achieved by:</p>
<ol>
<li>Decorators</li>
<li>Meta-classes</li>
</ol>
<p>Lets get familiar with them one by one.</p>
<h4 id="decorators">Decorators</h4>
<p>Decorator is way to add new functionality to existing function without modifying its original structure.</p>
<p>For instance we have this 3 following functions:</p>
<pre><code>def add(x, y):
    return x + y    

def sub(x, y):
    return x - y
    
def mul(x, y):
    return x * y    
</code></pre><p>Now we need to print function name and parameter values when function get called. This should be applicable to all three function above.
Naive way is to add print/log statement to all three functions. But this sounds very repetitive work and also need to modify each function body.</p>
<pre><code>def add(x, y):
    print(&quot;add is called with parameter {0},{1}&quot;.format(x,y))
    return x + y    

def sub(x, y):
    print(&quot;sub is called with parameter {0},{1}&quot;.format(x,y))
    return x - y
    
def mul(x, y):
    print(&quot;mul is called with parameter {0},{1}&quot;.format(x,y))
    return x * y    

print(add(5,3))
print(sub(5,3))
print(mul(5,3))

*********************** output *********************

add is called with parameter 5, 3
8
sub is called with parameter 5, 3
2
mul is called with parameter 5, 3
15   

</code></pre><p>Can we do better?
Of course we can because by the grace of god we are programmers and programmers are intelligent.
We can achieve this by writing decorator function and by NOT modifying any of existing function body.</p>
<pre><code>def my_decorator(func):
    def wrapper_function(*args):
        print(&quot;{0} is called with parameter {1}&quot;.format(func.__name__, args))
        return func(*args)
    return wrapper_function

@my_decorator
def add(x, y):
    return x + y
    
@my_decorator
def sub(x, y):
    return x - y

@my_decorator    
def mul(x, y):
    return x * y 

*********************** output *********************

add is called with parameter (5, 3)
8
sub is called with parameter (5, 3)
2
mul is called with parameter (5, 3)
15 
</code></pre><p>Bingo!
In above code snippet <em>my_decorator</em> is decorator function and we
decorate all three functions with <em>@my_decorator</em> and we have not touch existing function body to add this print
functionality.</p>
<p>So basically decorators are higher order function which takes function as argument and returns another function.
Here <em>my_decorator</em> takes function as argument and return <em>wrapper_function</em> as result where <em>wrapper_function</em>
adds our print functionality to <em>func</em>.</p>
<p>There is more to decorators but this a brief introduction to decorators in python.</p>
<h4 id="meta-classes">Meta-classes</h4>
<p>Now we seen decorators, those are for decorating functions. But there is more to meta-programming than decorators, &ldquo;Meta-classes&rdquo;.</p>
<p>Meta-classes are special type of classes than ordinary classes in python.
Where ordinary class defines behaviour of its own instance, meta-class defines behaviour of &ldquo;ordinary&rdquo; class and its instance.
Meta-class can add or subtract method or field to ordinary class.
Python has one special class &ldquo;type&rdquo; class which is default meta-class. All custom type class must inherit from type class.</p>
<p>For instance if we have class &ldquo;Calc&rdquo; having three class methods and we want to provide debug functionality to all
the methods in one class then we can use meta-class for this.</p>
<pre><code>class Calc():
    def add(self, x, y):
        return x + y
    
    def sub(self, x, y):
        return x - y
    
    def mul(self, x, y):
        return x * y
</code></pre><p>First we need to create a meta class &ldquo;MetaClassDebug&rdquo; having debug functionality and make Calc class inherit from MetaClassDebug.
And when we call any method from Calc class it will get invoke with our debug_function.</p>
<pre><code>def debug_function(func):

   def wrapper(*args, **kwargs):
       print(&quot;{0} is called with parameter {1}&quot;.format(func.__qualname__, args[1:]))
       return func(*args, **kwargs)
   
   return wrapper


def debug_all_methods(cls):

   for key, val in vars(cls).items():
       if callable(val):
           setattr(cls, key, debug_function(val))
   return cls


class MetaClassDebug(type):

   def __new__(cls, clsname, bases, clsdict):
       obj = super().__new__(cls, clsname, bases, clsdict)
       obj = debug_all_methods(obj)
       return obj


class Calc(metaclass=MetaClassDebug):
   def add(self, x, y):
       return x + y

   def sub(self, x, y):
       return x - y

   def mul(self, x, y):
       return x * y


calc = Calc()
print(calc.add(2, 3))
print(calc.sub(2, 3))
print(calc.mul(2, 3))


**************** output ****************

Calc.add is called with parameter (2, 3)
5
Calc.sub is called with parameter (2, 3)
-1
Calc.mul is called with parameter (2, 3)
6

</code></pre><p>Bingo!
In above snippet we create a meta-class <em>MetaClassDebug</em> and write <em><strong>new</strong></em> method which is responsible of creating
instance of class and applied our decorator function <em>debug_function</em> to the object(instance) which will get created
of every class which inherit <em>MetaClassDebug</em>.
As Calc is inherited from <em>MetaClassDebug</em> hence every method has been decorated by <em>debug_function</em> from <em>debug_all_methods</em>.</p>
<p>This way we can add new behaviour to all methods within a class and also control instance creation of a class using meta-class.
There can be much achieved by meta-class like adding a method or field to class or removing a method or field from a class and many more.</p>
<p>I wanted you to give glance of meta-programming in python so I could not cover all the things in this post.
I hope this article would have helped you to get familiarize with the concept of meta-programming.
Comment as well as criticism is always welcome!</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://saurabhkukade.github.io/tags/python">python</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>936 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2019-10-14 16:55 &#43;0530</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://saurabhkukade.github.io/2019/12/13/erlang-is-not-just-a-language-it-is-a-philosophy/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Erlang is not just a language, it is a philosophy</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://saurabhkukade.github.io/2018/10/26/python-a-better-scripting-language/">
                                <span class="button__text">Python - A Better Scripting Language.</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
            <div id="comments" class="thin">
                <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-saurabhkukade-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://saurabhkukade.github.io">Saurabh Kukade</a></span>
            
            <span></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://saurabhkukade.github.io/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js" integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-119315161-1', 'auto');
        ga('send', 'pageview');
    </script>



    </body>
</html>
